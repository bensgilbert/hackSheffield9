import"../chunks/entry.DHC2SN4l.js";import{o as Z,_ as ee,b as A}from"../chunks/preload-helper.Bgkgd2nS.js";import{t as G,a as j}from"../chunks/disclose-version.C6SromsU.js";import"../chunks/legacy.BRyyC5zr.js";import{t as te,i as a,U as u,V as S,F as c,y as n,w as i,z as ae,A as l,W as C}from"../chunks/runtime.BjLxFjMF.js";import{e as L,b as oe}from"../chunks/events.BBSx2ZVx.js";import{s as re,e as se,b as g,i as ie,r as O}from"../chunks/map.DMOfOm_X.js";import{p as ne}from"../chunks/event-modifiers.CWmzcjye.js";import{i as le}from"../chunks/lifecycle.B2pusBrv.js";function de(){}const xe=Object.freeze(Object.defineProperty({__proto__:null,load:de},Symbol.toStringTag,{value:"Module"}));var me=G('<div class="mt-2 flex items-center space-x-2"><input type="text" placeholder="Item name" required class="w-2/3 rounded-md border-gray-300 p-2 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"> <input type="number" placeholder="Quantity" min="1" required class="w-1/3 rounded-md border-gray-300 p-2 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"> <button type="button" class="text-red-500 hover:text-red-700">Remove</button></div>'),ce=G('<div class="container relative mx-auto p-4"><div class="absolute left-1/2 top-4 z-10 w-4/5 -translate-x-1/2 transform"><input type="text" placeholder="Search for a location" class="w-full rounded-md border-gray-300 p-2 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"></div> <div class="relative"><div class="h-[400px] w-full rounded-md bg-gray-300"></div> <div class="absolute left-1/2 top-1/2 z-20 -translate-x-1/2 -translate-y-1/2 transform" style="pointer-events: none"><img src="/location-icon.png" alt="Map Pin" class="h-5 w-5"></div></div> <div class="mt-4"><form class="space-y-4"><div><label for="message" class="block text-sm font-medium text-gray-700">Message</label> <textarea id="message" required class="mt-1 w-full rounded-md border-gray-300 p-2 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" placeholder="Enter a message"></textarea></div> <div><label for="time" class="block text-sm font-medium text-gray-700">Delivery Time</label> <input type="time" id="time" required class="mt-1 w-full rounded-md border-gray-300 p-2 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"></div> <div><label for="items" class="block text-sm font-medium text-gray-700">Items</label> <!> <button type="button" class="mt-2 text-indigo-500 hover:text-indigo-700">Add Item</button></div> <button type="submit" class="mt-4 w-full rounded-md bg-indigo-600 px-4 py-2 font-medium text-white hover:bg-indigo-700">Submit Request</button></form></div></div>');function we(B,J){te(J,!1);let v=u(),p,d=u(),m={lat:13.736717,lng:100.523186},f=!1;Z(()=>{K()});async function K(){const e=await ee(()=>import("../chunks/index.B1X_Juiv.js"),[],import.meta.url),{Loader:r}=e,t=new r({apiKey:"AIzaSyDB8EtJ3vK8gwJgTgjeNyvDLkUOYnal1GM",version:"weekly",libraries:["places","maps"]});try{await t.load(),N()}catch(s){console.error("Error loading Google Maps",s)}}function N(){const e=window.google,r={center:m,zoom:12,disableDefaultUI:!0,gestureHandling:"greedy",styles:re};p=new e.maps.Map(a(v),r),U(e),p.addListener("idle",()=>{if(!f){const t=p.getCenter();m={lat:t.lat(),lng:t.lng()},$(e)}})}function U(e){const r=new e.maps.places.Autocomplete(a(d),{types:["geocode"],componentRestrictions:{country:"uk"}});r.addListener("place_changed",()=>{const t=r.getPlace();if(t.geometry&&t.geometry.location){f=!0;const s=t.geometry.location;p.setCenter(s),m={lat:s.lat(),lng:s.lng()},f=!1}else alert("No location details available for the selected place.")})}function $(e){new e.maps.Geocoder().geocode({location:m},(t,s)=>{s==="OK"&&t[0]?S(d,a(d).value=t[0].formatted_address):console.error("Error finding address: ",s)})}let b=u(""),o=u([{name:"",quantity:1}]),y=u("");function F(){c(o,[...a(o),{name:"",quantity:1}])}function V(e){c(o,a(o).filter((r,t)=>t!==e))}async function H(){const e={message:a(y),lat:m.lat,lng:m.lng,address:a(d).value,collectionTime:a(b),items:a(o)};try{(await fetch("http://127.0.0.1:300/create-request",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok?alert("Request submitted successfully!"):console.error("Failed to submit request")}catch(r){console.error("Error submitting request: ",r)}}le();var _=ce(),h=n(_),Q=n(h);A(Q,e=>c(d,e),()=>a(d)),l(h);var x=i(h,2),W=n(x);A(W,e=>c(v,e),()=>a(v)),C(2),l(x);var D=i(x,2),w=n(D),q=n(w),T=i(n(q),2);oe(T),l(q);var k=i(q,2),z=i(n(k),2);O(z),l(k);var P=i(k,2),R=i(n(P),2);se(R,1,()=>a(o),ie,(e,r,t)=>{var s=me(),E=n(s);O(E);var I=i(E,2);O(I);var X=i(I,2);l(s),g(E,()=>a(o)[t].name,M=>S(o,a(o)[t].name=M)),g(I,()=>a(o)[t].quantity,M=>S(o,a(o)[t].quantity=M)),L("click",X,()=>V(t)),j(e,s)});var Y=i(R,2);l(P),C(2),l(w),l(D),l(_),g(T,()=>a(y),e=>c(y,e)),g(z,()=>a(b),e=>c(b,e)),L("click",Y,F),L("submit",w,ne(H)),j(B,_),ae()}export{we as component,xe as universal};
