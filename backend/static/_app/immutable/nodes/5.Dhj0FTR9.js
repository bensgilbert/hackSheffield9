import"../chunks/entry.DbD_f1gk.js";import{o as G,_ as I,b as L}from"../chunks/preload-helper.BU0XxFM2.js";import{t as E,a as y}from"../chunks/disclose-version.DqJhXajo.js";import"../chunks/legacy.C7OPbul6.js";import{p as C,g as t,ai as k,q as x,j as l,s as r,t as q,k as R,l as a}from"../chunks/runtime.BWfRYliX.js";import{s as n}from"../chunks/render.DLMqiKb9.js";import{s as S,e as J,i as K}from"../chunks/map.ByqD-lcE.js";import{e as N}from"../chunks/events.CHO8LOBA.js";import{i as U}from"../chunks/lifecycle.DxgCNWoR.js";const re=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var Y=E("<li> </li>"),B=E('<div class="container relative mx-auto p-4"><div class="relative"><div class="h-[400px] w-full rounded-md bg-gray-300"></div></div> <div class="mt-4"><h3><b>Your Order</b></h3> <p><strong>Collection Time:</strong> </p> <p><strong>Address:</strong> </p> <p><strong>Message:</strong> </p> <p><strong>Fulfilled by:</strong> </p> <h4 class="mt-4"><b>Items:</b></h4> <ul></ul> <div class="mt-6"><button class="w-full rounded-md bg-red-600 px-4 py-2 text-white hover:bg-red-700">Cancel</button></div></div></div>');function ae(M,O){C(O,!1);let c=k(),_,o=k({username:"superuser123",collectionTime:"0800",items:[["bread",2],["bananas",1],["water",4],["loo roll",3]],lat:53.38182330444414,lng:-1.4816028478377632,message:"hello",address:"blah blah blah",fulfilled:"user123"});G(async()=>{T();try{const e=await fetch("http://localhost:3000/check-order");e.ok?(await e.json()).exists||(window.location.href="/makerequest"):console.error("Failed to check order existence")}catch(e){console.error("Error checking order:",e)}fetch("http://localhost:3000/deliver-personal-order",{redirect:"error"}).then(e=>{if(!e.ok)throw console.error("Error: ",e.status),new Error("Failed to fetch orders");return e.json()}).then(e=>{console.log("Orders:",e),e.length>0&&e[0].error?console.error(e[0].error):(x(o,e[0]),console.log("First order set:",t(o)))}).catch(e=>{console.error("Request failed: ",e),window.location="http://localhost:3000/login"})});async function T(){const e=await I(()=>import("../chunks/index.B1X_Juiv.js"),[],import.meta.url),{Loader:s}=e,i=new s({apiKey:"AIzaSyDB8EtJ3vK8gwJgTgjeNyvDLkUOYnal1GM",version:"weekly",libraries:["places","maps"]});try{await i.load(),$()}catch(f){console.error("Error loading Google Maps",f)}}function $(){const e=window.google,s={center:{lat:t(o).lat,lng:t(o).lng},zoom:18,disableDefaultUI:!0,gestureHandling:"none",zoomControl:!1,draggable:!1,scrollwheel:!1,styles:S};_=new e.maps.Map(t(c),s),new e.maps.Marker({position:{lat:t(o).lat,lng:t(o).lng},map:_,title:"Order Location"})}U();var d=B(),p=l(d),j=l(p);L(j,e=>x(c,e),()=>t(c)),a(p);var b=r(p,2),m=r(l(b),2),F=r(l(m));a(m);var u=r(m,2),P=r(l(u));a(u);var g=r(u,2),z=r(l(g));a(g);var v=r(g,2),A=r(l(v));a(v);var h=r(v,4);J(h,5,()=>t(o).items,K,(e,s)=>{var i=Y(),f=l(i);a(i),q(()=>n(f,`${t(s).name??""} - Quantity: ${t(s).quantity??""}`)),y(e,i)}),a(h);var w=r(h,2),D=l(w);a(w),a(b),a(d),q(()=>{n(F,` ${t(o).collectionTime??""}`),n(P,` ${t(o).address??""}`),n(z,` ${t(o).message??""}`),n(A,` ${(t(o).fulfilled||"Not fulfilled yet")??""}`)}),N("click",D,async()=>{try{const e=await fetch("http://localhost:3000/completed-request",{method:"GET",credentials:"include"});e.ok?(console.log("Request completed successfully."),window.location.href="/makerequest"):(console.error("Failed to complete request:",e.statusText),alert("Failed to complete the request. Please try again."))}catch(e){console.error("Error making request to /completed-request:",e),alert("An error occurred. Please try again.")}}),y(M,d),R()}export{ae as component,re as universal};
