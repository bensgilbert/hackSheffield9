import"../chunks/entry.D9eYwVkx.js";import{o as ee,_ as te,b as A}from"../chunks/preload-helper.BU0XxFM2.js";import{t as B,a as C}from"../chunks/disclose-version.DqJhXajo.js";import"../chunks/legacy.C7OPbul6.js";import{p as ae,g as a,ai as g,an as L,q as c,j as n,s as i,k as oe,l,am as G}from"../chunks/runtime.BWfRYliX.js";import{e as O,c as re}from"../chunks/events.CHO8LOBA.js";import{s as se,e as ie,i as ne}from"../chunks/map.ByqD-lcE.js";import{b,r as T}from"../chunks/input.wJnTXmY3.js";import{i as le}from"../chunks/lifecycle.DxgCNWoR.js";function de(u){return function(...v){var p=v[0];return p.preventDefault(),u==null?void 0:u.apply(this,v)}}const xe=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var me=B('<div class="mt-2 flex items-center space-x-2"><input type="text" placeholder="Item name" required class="w-2/3 rounded-md border-gray-300 p-2 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"> <input type="number" placeholder="Quantity" min="1" required class="w-1/3 rounded-md border-gray-300 p-2 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"> <button type="button" class="text-red-500 hover:text-red-700">Remove</button></div>'),ce=B('<div class="container relative mx-auto p-4"><div class="absolute left-1/2 top-4 z-10 w-4/5 -translate-x-1/2 transform"><input type="text" placeholder="Search for a location" class="w-full rounded-md border-gray-300 p-2 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"></div> <div class="relative"><div class="h-[400px] w-full rounded-md bg-gray-300"></div> <div class="absolute left-1/2 top-1/2 z-20 -translate-x-1/2 -translate-y-1/2 transform" style="pointer-events: none"><img src="/location-icon.png" alt="Map Pin" class="h-5 w-5"></div></div> <div class="mt-4"><form class="space-y-4"><div><label for="message" class="block text-sm font-medium text-gray-700">Message</label> <textarea id="message" required class="mt-1 w-full rounded-md border-gray-300 p-2 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" placeholder="Enter a message"></textarea></div> <div><label for="time" class="block text-sm font-medium text-gray-700">Delivery Time</label> <input type="time" id="time" required class="mt-1 w-full rounded-md border-gray-300 p-2 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"></div> <div><label for="items" class="block text-sm font-medium text-gray-700">Items</label> <!> <button type="button" class="mt-2 text-indigo-500 hover:text-indigo-700">Add Item</button></div> <button type="submit" class="mt-4 w-full rounded-md bg-indigo-600 px-4 py-2 font-medium text-white hover:bg-indigo-700">Submit Request</button></form></div></div>');function we(u,v){ae(v,!1);let p=g(),f,d=g(),m={lat:13.736717,lng:100.523186},y=!1;ee(()=>{J()});async function J(){const e=await te(()=>import("../chunks/index.B1X_Juiv.js"),[],import.meta.url),{Loader:o}=e,t=new o({apiKey:"AIzaSyDB8EtJ3vK8gwJgTgjeNyvDLkUOYnal1GM",version:"weekly",libraries:["places","maps"]});try{await t.load(),K()}catch(s){console.error("Error loading Google Maps",s)}}function K(){const e=window.google,o={center:m,zoom:12,disableDefaultUI:!0,gestureHandling:"greedy",styles:se};f=new e.maps.Map(a(p),o),N(e),f.addListener("idle",()=>{if(!y){const t=f.getCenter();m={lat:t.lat(),lng:t.lng()},U(e)}})}function N(e){const o=new e.maps.places.Autocomplete(a(d),{types:["geocode"],componentRestrictions:{country:"uk"}});o.addListener("place_changed",()=>{const t=o.getPlace();if(t.geometry&&t.geometry.location){y=!0;const s=t.geometry.location;f.setCenter(s),m={lat:s.lat(),lng:s.lng()},y=!1}else alert("No location details available for the selected place.")})}function U(e){new e.maps.Geocoder().geocode({location:m},(t,s)=>{s==="OK"&&t[0]?L(d,a(d).value=t[0].formatted_address):console.error("Error finding address: ",s)})}let _=g(""),r=g([{name:"",quantity:1}]),h=g("");function F(){c(r,[...a(r),{name:"",quantity:1}])}function H(e){c(r,a(r).filter((o,t)=>t!==e))}async function Q(){const e={message:a(h),lat:m.lat,lng:m.lng,address:a(d).value,collectionTime:V(a(_)),items:a(r)};try{(await fetch("/create-request",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok?alert("Request submitted successfully!"):console.error("Failed to submit request")}catch(o){console.error("Error submitting request: ",o)}}function V(e){const[o,t]=e.split(":");return`${o}${t}`}le();var x=ce(),w=n(x),Y=n(w);A(Y,e=>c(d,e),()=>a(d)),l(w);var q=i(w,2),W=n(q);A(W,e=>c(p,e),()=>a(p)),G(2),l(q);var P=i(q,2),k=n(P),E=n(k),R=i(n(E),2);re(R),l(E);var I=i(E,2),j=i(n(I),2);T(j),l(I);var z=i(I,2),$=i(n(z),2);ie($,1,()=>a(r),ne,(e,o,t)=>{var s=me(),M=n(s);T(M);var S=i(M,2);T(S);var Z=i(S,2);l(s),b(M,()=>a(r)[t].name,D=>L(r,a(r)[t].name=D)),b(S,()=>a(r)[t].quantity,D=>L(r,a(r)[t].quantity=D)),O("click",Z,()=>H(t)),C(e,s)});var X=i($,2);l(z),G(2),l(k),l(P),l(x),b(R,()=>a(h),e=>c(h,e)),b(j,()=>a(_),e=>c(_,e)),O("click",X,F),O("submit",k,de(Q)),C(u,x),oe()}export{we as component,xe as universal};
