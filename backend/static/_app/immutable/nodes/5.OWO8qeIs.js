import"../chunks/entry.BTiESpIL.js";import{o as I,_ as L,b as A}from"../chunks/preload-helper.BU0XxFM2.js";import{t as M,a as w}from"../chunks/disclose-version.DqJhXajo.js";import"../chunks/legacy.C7OPbul6.js";import{p as G,g as t,ai as y,q as x,j as l,s as r,t as k,k as P,l as a}from"../chunks/runtime.BWfRYliX.js";import{s as n}from"../chunks/render.DLMqiKb9.js";import{s as S,e as C,i as J}from"../chunks/map.ByqD-lcE.js";import{i as K}from"../chunks/lifecycle.DxgCNWoR.js";const Z=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var N=M("<li> </li>"),R=M('<div class="container relative mx-auto p-4"><div class="relative"><div class="h-[400px] w-full rounded-md bg-gray-300"></div></div> <div class="mt-4"><h3><b>Your Order</b></h3> <p><strong>Collection Time:</strong> </p> <p><strong>Address:</strong> </p> <p><strong>Message:</strong> </p> <p><strong>Fulfilled by:</strong> </p> <h4 class="mt-4"><b>Items:</b></h4> <ul></ul></div></div>');function ee(E,O){G(O,!1);let c=y(),h,o=y({username:"superuser123",collectionTime:"0800",items:[["bread",2],["bananas",1],["water",4],["loo roll",3]],lat:53.38182330444414,lng:-1.4816028478377632,message:"hello",address:"blah blah blah",fulfilled:"user123"});I(async()=>{$();try{const e=await fetch("http://localhost:3000/check-order");e.ok?(await e.json()).exists||(window.location.href="/makerequest"):console.error("Failed to check order existence")}catch(e){console.error("Error checking order:",e)}fetch("http://localhost:3000/deliver-personal-order",{redirect:"error"}).then(e=>{if(!e.ok)throw console.error("Error: ",e.status),new Error("Failed to fetch orders");return e.json()}).then(e=>{console.log("Orders:",e),e.length>0&&e[0].error?console.error(e[0].error):(x(o,e[0]),console.log("First order set:",t(o)))}).catch(e=>{console.error("Request failed: ",e),window.location="http://localhost:3000/login"})});async function $(){const e=await L(()=>import("../chunks/index.B1X_Juiv.js"),[],import.meta.url),{Loader:s}=e,i=new s({apiKey:"AIzaSyDB8EtJ3vK8gwJgTgjeNyvDLkUOYnal1GM",version:"weekly",libraries:["places","maps"]});try{await i.load(),j()}catch(f){console.error("Error loading Google Maps",f)}}function j(){const e=window.google,s={center:{lat:t(o).lat,lng:t(o).lng},zoom:18,disableDefaultUI:!0,gestureHandling:"none",zoomControl:!1,draggable:!1,scrollwheel:!1,styles:S};h=new e.maps.Map(t(c),s),new e.maps.Marker({position:{lat:t(o).lat,lng:t(o).lng},map:h,title:"Order Location"})}K();var d=R(),p=l(d),T=l(p);A(T,e=>x(c,e),()=>t(c)),a(p);var _=r(p,2),g=r(l(_),2),q=r(l(g));a(g);var m=r(g,2),z=r(l(m));a(m);var v=r(m,2),D=r(l(v));a(v);var u=r(v,2),F=r(l(u));a(u);var b=r(u,4);C(b,5,()=>t(o).items,J,(e,s)=>{var i=N(),f=l(i);a(i),k(()=>n(f,`${t(s).name??""} - Quantity: ${t(s).quantity??""}`)),w(e,i)}),a(b),a(_),a(d),k(()=>{n(q,` ${t(o).collectionTime??""}`),n(z,` ${t(o).address??""}`),n(D,` ${t(o).message??""}`),n(F,` ${(t(o).fulfilled||"Not fulfilled yet")??""}`)}),w(E,d),P()}export{ee as component,Z as universal};
